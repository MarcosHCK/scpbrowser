<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright (C) 2021-2022 MarcosHCK

This file is part of scpbrowser.

scpbrowser is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

scpbrowser is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with scpbrowser. If not, see <http://www.gnu.org/licenses/>.

Author: MarcosHCK
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>SCP Foundation - About</title>
    <link rel="stylesheet" href="scss:///css/about.scss" type="text/css" charset="utf-8" media="all" />
    <?lua include ('lua.head') ?>
  </head>
  <body>
    <?lua include ('lua.body') ?>
    <?lua body.begin () ?>

      <?lua body.headerbar () ?>
      <?lua local config = require ('config') ?>

        <div class="scp-content-wrapper">
          <div class="scp-about scp-marble-tablet">

            <div class="centerable">
              <h1 class="compact" style="margin-bottom: 0px; font-weight: bolder;">Scp Browser</h1>
              <h4 class="compact" style="margin-top: 0px;">
                <?lua io.write (('%s %s'):format (config.PACKAGE_VERSION, config.PACKAGE_RELEASE)) ?>
              </h4>
              <h4 class="compact">
                <span>Scp Foundation database official Browser</span>
                <br />
                <span>Browse through SCPNET like never before. Approved for use by all clearance levels from Level 1 to 4</span>
              </h4>
              <a href="<?lua io.write (config.PACKAGE_URL) ?>">
                <h4 class="compact">Vist our website here</h4>
              </a>

              <?lua
                local dumpres
                do
                  local config = require ('config')
                  local lgi = require ('lgi')
                  local GLib = lgi.GLib
                  local Gio = lgi.Gio

                  dumpres = function (name)
                    local file = config.resources:get_child (name)
                    local fstream = file:read ()
                    local stream = Gio.DataInputStream.new (fstream)

                    io.stdout:write ('<p>')

                    repeat
                      local line = stream:read_line_utf8 ()
                      if (line ~= nil) then
                        if (line == '') then
                          io.stdout:write ('</p><p>')
                        else
                          local info = GLib.markup_escape_text (line, -1)
                          io.stdout:write (('<span>%s </span>'):format (info))
                        end
                      end
                    until (line == nil)

                    io.stdout:write ('</p>')
                  end
                end
              ?>
              
              <div class="scp-expandable">
                <h4 class="title compact">
                  <span>Credits</span>
                </h4>
                <div class="content">
                  <?lua dumpres ('res/authors') ?>
                </div>
              </div>
              <div class="scp-expandable">
                <h4 class="title compact">
                  <span>Copyright</span>
                </h4>
                <div class="content">
                  <?lua dumpres ('res/copying') ?>
                </div>
              </div>
            </div>

          </div>
        </div>

    <?lua body.finish () ?>
    <style>

      <?lua
        local tags = {}
        local class = 'compact'

        table.insert (tags, 'p')
        table.insert (tags, 'span')

        for i = 1, 5 do
          table.insert (tags, ('h%i'):format (i))
        end

        for i, tag in ipairs (tags) do
          if (i > 1) then
            io.write (', ')
          end
          io.write (('%s.%s'):format (tag, class))
        end
      ?>
        {
          margin-top: 5px;
          margin-bottom: 5px;
        }

    </style>
  </body>
</html>
